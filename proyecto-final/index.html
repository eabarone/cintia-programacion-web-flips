<!doctype html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Guía #1.pdf — E-Flip Generator</title>
    <link rel="preload" as="image" href="./images/page-1-b5d728b5.png" />
    <meta name="eflip-integrity" content="eyJpbWFnZXMvcGFnZS0xLWI1ZDcyOGI1LnBuZyI6ImI1ZDcyOGI1IiwiaW1hZ2VzL3BhZ2UtMi1hMjk5OWZlYy5wbmciOiJhMjk5OWZlYyIsImltYWdlcy9wYWdlLTMtNWYyODM4ODEucG5nIjoiNWYyODM4ODEiLCJpbWFnZXMvcGFnZS00LTdlZjk0YzBmLnBuZyI6IjdlZjk0YzBmIiwiaW1hZ2VzL3BhZ2UtNS1lNzEwMTBmNC5wbmciOiJlNzEwMTBmNCIsImltYWdlcy9wYWdlLTYtNjVlMGRkOWIucG5nIjoiNjVlMGRkOWIiLCJpbWFnZXMvcGFnZS03LWNlMzMwMjllLnBuZyI6ImNlMzMwMjllIiwiaW1hZ2VzL3BhZ2UtOC04ZDhmZDQ1ZC5wbmciOiI4ZDhmZDQ1ZCIsImltYWdlcy9wYWdlLTktZmUxZTU0MjgucG5nIjoiZmUxZTU0MjgiLCJpbWFnZXMvcGFnZS0xMC01YmVlOTkxNy5wbmciOiI1YmVlOTkxNyIsImltYWdlcy9wYWdlLTExLTA1MWU0NjI1LnBuZyI6IjA1MWU0NjI1IiwiaW1hZ2VzL3BhZ2UtMTItMTc1OTdhOGEucG5nIjoiMTc1OTdhOGEiLCJpbWFnZXMvcGFnZS0xMy1kNTE1NmZhOC5wbmciOiJkNTE1NmZhOCIsImltYWdlcy9wYWdlLTE0LWRmOTQ2OGY0LnBuZyI6ImRmOTQ2OGY0In0=">
    <style>
      html, body { height: 100%; margin: 0; background: url("data:image/svg+xml,%3Csvg width='20' height='20' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='%23ffffff' fill-opacity='0.05' fill-rule='evenodd'%3E%3Ccircle cx='3' cy='3' r='3'/%3E%3Ccircle cx='13' cy='13' r='3'/%3E%3C/g%3E%3C/svg%3E"), #1e293b; color: #e5e7eb; font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica, Arial, sans-serif; }
      .wrap { display: flex; align-items: center; justify-content: center; height: 100%; padding: 16px; box-sizing: border-box; }
      #book { position: relative; width: auto; height: auto; max-width: 95vw; max-height: 90vh; box-shadow: 0 12px 34px rgba(0,0,0,.38), inset 0 1px 0 rgba(255,255,255,.03), inset 0 24px 48px rgba(0,0,0,.18); background: rgba(17, 24, 39, 0.85); backdrop-filter: blur(12px); border-radius: 16px; overflow: hidden; touch-action: none; }
      #book::after { content: ''; position: absolute; top: 4%; bottom: 4%; left: 50%; width: 3px; transform: translateX(-50%); background: linear-gradient(to bottom, transparent, rgba(0,0,0,.4), transparent); opacity: .25; pointer-events: none; filter: blur(.2px); }
      #book[data-mode="single"]::after { display: none; }
      .loading { text-align: center; opacity: .8; }
      .controls { position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%); display: flex; gap: 12px; background: rgba(15, 23, 42, 0.92); padding: 8px 12px; border-radius: 999px; backdrop-filter: blur(8px); z-index: 10000; border: 1px solid rgba(255, 255, 255, 0.08); box-shadow: 0 8px 24px rgba(0,0,0,.35); }
      .btn { color: #ffffff; background: rgba(255, 255, 255, 0.08); border: 1px solid rgba(255, 255, 255, 0.2); padding: 6px 10px; border-radius: 10px; cursor: pointer; transition: all 0.2s; }
      .btn:hover { background: rgba(255, 255, 255, 0.12); }
      .btn:disabled { opacity: .5; cursor: not-allowed; }
    </style>
  </head>
  <body>
    <div class="wrap">
      <div id="book"><div class="loading">Cargando…</div></div>
    </div>
    <div class="controls">
      <button id="prev" class="btn">◀︎</button>
      <span id="status"></span>
      <button id="next" class="btn">▶︎</button>
    </div>
    <script src="./vendor/jquery.min.js"></script>
    <script src="./vendor/turn.min.js"></script>
    <script data-pages='["images/page-1-b5d728b5.png","images/page-2-a2999fec.png","images/page-3-5f283881.png","images/page-4-7ef94c0f.png","images/page-5-e71010f4.png","images/page-6-65e0dd9b.png","images/page-7-ce33029e.png","images/page-8-8d8fd45d.png","images/page-9-fe1e5428.png","images/page-10-5bee9917.png","images/page-11-051e4625.png","images/page-12-17597a8a.png","images/page-13-d5156fa8.png","images/page-14-df9468f4.png"]' data-integrity='{"images/page-1-b5d728b5.png":"b5d728b5","images/page-2-a2999fec.png":"a2999fec","images/page-3-5f283881.png":"5f283881","images/page-4-7ef94c0f.png":"7ef94c0f","images/page-5-e71010f4.png":"e71010f4","images/page-6-65e0dd9b.png":"65e0dd9b","images/page-7-ce33029e.png":"ce33029e","images/page-8-8d8fd45d.png":"8d8fd45d","images/page-9-fe1e5428.png":"fe1e5428","images/page-10-5bee9917.png":"5bee9917","images/page-11-051e4625.png":"051e4625","images/page-12-17597a8a.png":"17597a8a","images/page-13-d5156fa8.png":"d5156fa8","images/page-14-df9468f4.png":"df9468f4"}'>
      (async function(){
        const imgs = JSON.parse(document.currentScript.getAttribute('data-pages'));
        const first = await new Promise((res, rej) => { const i = new Image(); i.onload = () => res(i); i.onerror = rej; i.src = imgs[0]; });
        const ratio = first.naturalHeight / first.naturalWidth;
        const container = document.getElementById('book');
        container.innerHTML = '';

        function mount(){
          const book = document.getElementById('book');
          imgs.forEach((src, idx) => {
            const page = document.createElement('div');
            if (idx === 0 || idx === imgs.length - 1) page.className = 'hard';
            const img = document.createElement('img');
            img.src = src; img.alt = '';
            img.style.width = '100%'; img.style.height = '100%'; img.style.objectFit = 'contain'; img.style.background = '#ffffff'; img.style.boxSizing = 'border-box';
            img.setAttribute('draggable', 'false');
            page.appendChild(img);
            book.appendChild(page);
          });
          const $ = window.jQuery;
          const isMobile = () => window.innerWidth < 992;
          const maxBookW = () => Math.min(window.innerWidth * 0.95, 1400);
          const compute = () => {
            const maxW = maxBookW();
            const controls = document.querySelector('.controls');
            const availableH = Math.max(200, window.innerHeight - (controls?.offsetHeight || 0) - 24);
            const maxPageWByWidth = isMobile() ? maxW : Math.floor(maxW / 2);
            const maxPageWByHeight = Math.round(availableH / ratio);
            const pageWidth = Math.max(180, Math.min(maxPageWByWidth, maxPageWByHeight));
            const bookWidth = isMobile() ? pageWidth : pageWidth * 2;
            const bookHeight = Math.round(pageWidth * ratio);
            return { pageWidth, bookWidth, bookHeight };
          };
          const s0 = compute();
          $(book).turn({ width: s0.bookWidth, height: s0.bookHeight, display: isMobile() ? 'single' : 'double', autoCenter: true, elevation: 80, acceleration: true, turnCorners: 'bl,br,tl,tr', duration: 800, gradients: true });
          book.setAttribute('data-mode', isMobile() ? 'single' : 'double');
          const onResize = () => {
            const s = compute();
            try { $(book).turn('display', isMobile() ? 'single' : 'double'); } catch {}
            try { $(book).turn('size', s.bookWidth, s.bookHeight); } catch {}
            try { $(book).turn('center'); } catch {}
            book.setAttribute('data-mode', isMobile() ? 'single' : 'double');
            try {
              const status = document.getElementById('status');
              const c = $(book).turn('page');
              status.textContent = c + ' / ' + imgs.length;
            } catch {}
          };
          window.addEventListener('resize', onResize);
          window.addEventListener('orientationchange', onResize);
          const prev = document.getElementById('prev');
          const next = document.getElementById('next');
          const status = document.getElementById('status');
          function updateStatus(){ const c = $(book).turn('page'); status.textContent = c + ' / ' + imgs.length; prev.disabled = c <= 1; next.disabled = c >= imgs.length; }
          updateStatus();
          // Ajustar inmediatamente tras montar por si cambió el layout
          onResize();
          $(book).bind('turned', updateStatus);
          prev.onclick = () => { $(book).turn('previous'); };
          next.onclick = () => { $(book).turn('next'); };
          
          // Habilitar drag con mouse en desktop
          let isDragging = false;
          let startX = 0;
          let startPage = 1;
          
          book.addEventListener('mousedown', (e) => {
            if (isMobile()) return; // Solo en desktop
            isDragging = true;
            startX = e.clientX;
            startPage = $(book).turn('page');
            book.style.cursor = 'grabbing';
          });
          
          window.addEventListener('mousemove', (e) => {
            if (!isDragging) return;
            const deltaX = e.clientX - startX;
            const threshold = 50;
            
            if (Math.abs(deltaX) > threshold) {
              if (deltaX > 0 && startPage > 1) {
                $(book).turn('previous');
                isDragging = false;
              } else if (deltaX < 0 && startPage < imgs.length) {
                $(book).turn('next');
                isDragging = false;
              }
            }
          });
          
          window.addEventListener('mouseup', () => {
            if (isDragging) {
              isDragging = false;
              book.style.cursor = 'grab';
            }
          });
          
          // Cursor visual para indicar que se puede arrastrar
          book.style.cursor = 'grab';
        }

        mount();
        // Marcas de agua dinámicas (superior derecha e inferior izquierda)
        (function dynamicWatermarks(){
          const TOP_ID = 'eflip-wm-top';
          const BOT_ID = 'eflip-wm-bot';
          function createTop(){
            if (document.getElementById(TOP_ID)) return;
            const host = document.createElement('div'); host.id = TOP_ID; host.style.position='fixed'; host.style.top='12px'; host.style.right='12px'; host.style.zIndex='10001'; host.style.pointerEvents='none';
            const shadow = host.attachShadow ? host.attachShadow({ mode: 'closed' }) : null;
            const wrap = document.createElement('div');
            wrap.innerHTML = '<style>.wm{display:inline-flex;align-items:center;gap:6px;padding:6px 10px;border-radius:12px;background:rgba(15,23,42,.78);color:#e2e8f0;font:600 12px/1.2 system-ui,-apple-system,Segoe UI,Roboto;letter-spacing:.2px;border:1px solid rgba(255,255,255,.09);box-shadow:0 6px 20px rgba(0,0,0,.25)}</style><div class="wm">E‑Flip Generator <small style="opacity:.8;font-weight:500">Static</small></div>';
            (shadow||host).appendChild(wrap);
            document.body.appendChild(host);
          }
          function createBot(){
            if (document.getElementById(BOT_ID)) return;
            const host = document.createElement('div'); host.id = BOT_ID; host.style.position='fixed'; host.style.left='12px'; host.style.bottom='12px'; host.style.zIndex='10001'; host.style.pointerEvents='none';
            const shadow = host.attachShadow ? host.attachShadow({ mode: 'closed' }) : null;
            const wrap = document.createElement('div');
            wrap.innerHTML = '<style>.wm{display:inline-flex;align-items:center;gap:6px;padding:6px 10px;border-radius:12px;background:rgba(15,23,42,.78);color:#e2e8f0;font:600 12px/1.2 system-ui,-apple-system,Segoe UI,Roboto;letter-spacing:.2px;border:1px solid rgba(255,255,255,.09);box-shadow:0 6px 20px rgba(0,0,0,.25)}</style><div class="wm"><small style="opacity:.8;font-weight:500">by</small> Eduar Barón Espitia</div>';
            (shadow||host).appendChild(wrap);
            document.body.appendChild(host);
          }
          createTop(); createBot();
          const mo = new MutationObserver(() => { if (!document.getElementById(TOP_ID)) createTop(); if (!document.getElementById(BOT_ID)) createBot(); });
          mo.observe(document.documentElement, { childList:true, subtree:true });
          setInterval(() => { if (!document.getElementById(TOP_ID)) createTop(); if (!document.getElementById(BOT_ID)) createBot(); }, 4000);
        })();
      })();
    </script>
  </body>
</html>